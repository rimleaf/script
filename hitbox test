--// Fixed Hitbox Extender (LookVector Only, KRNL Safe) //--

local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Stop flag
local emergency_stop = false

-- Fixed extender distance (studs)
local FIXED_STUDS = 14  -- change this to your desired range

-- Main Extender
local function ExtendHitbox(duration)
	local character = LocalPlayer.Character
	if not character then return end

	local humanoid = character:FindFirstChildOfClass("Humanoid")
	if not humanoid or humanoid.Health < 200 then
		-- Block extender if health < 200
		return
	end

	local hrp = character:FindFirstChild("HumanoidRootPart")
	if not hrp then return end

	local startTime = tick()

	-- Reset stop flag if active
	if emergency_stop then
		emergency_stop = false
	end

	repeat
		RunService.Heartbeat:Wait()

		character = LocalPlayer.Character
		humanoid = character and character:FindFirstChildOfClass("Humanoid")
		hrp = character and character:FindFirstChild("HumanoidRootPart")

		if not (character and humanoid and hrp and hrp.Parent) then
			continue
		end

		-- Apply fixed forward boost only by LookVector
		local lookVector = hrp.CFrame.LookVector
		local velocity = hrp.AssemblyLinearVelocity

		hrp.AssemblyLinearVelocity = velocity + (lookVector * FIXED_STUDS)

		RunService.RenderStepped:Wait()

		-- Reset velocity to normal each frame after applying
		if character and hrp and hrp.Parent then
			hrp.AssemblyLinearVelocity = velocity
		end

	until tick() - startTime > tonumber(duration) or emergency_stop

	-- Reset stop
	if emergency_stop then
		emergency_stop = false
	end
end

-- Stop function
local function StopExtendingHitbox()
	emergency_stop = true
end

-- Respawn reconnect
LocalPlayer.CharacterAdded:Connect(function(newChar)
	wait(0.5)
	StopExtendingHitbox()
	ExtendHitbox(9e9) -- always active until stopped
end)

-- Start immediately
ExtendHitbox(9e9)
