local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function modifyAllTools(toolsToModify)
    local function applyAttributes(tool, attributes)
        if tool then
            for attribute, value in pairs(attributes) do
                tool:SetAttribute(attribute, value)
            end
            print(tool.Name .. " attributes set.")
        end
    end

    -- Check Backpack
    for _, tool in pairs(LocalPlayer.Backpack:GetChildren()) do
        local attributes = toolsToModify[tool.Name]
        if attributes then
            applyAttributes(tool, attributes)
        end
    end

    -- Check Character
    if LocalPlayer.Character then
        for _, tool in pairs(LocalPlayer.Character:GetChildren()) do
            local attributes = toolsToModify[tool.Name]
            if attributes then
                applyAttributes(tool, attributes)
            end
        end
    end
end

local function utilityRespawn(character)
    local player = Players.LocalPlayer
    local accessoryEffects = player:FindFirstChild("AccessoryEffects") or player.Backpack.Parent:FindFirstChild("AccessoryEffects")

    if accessoryEffects then
        accessoryEffects:SetAttribute("Lightning_Chance", 100)
        accessoryEffects:SetAttribute("Melee_Range", 2.5)
        accessoryEffects:SetAttribute("Pogo_Range", 1.5)
    end

    if character then
        character:SetAttribute("DashRegenTime", 0.01)
        character:SetAttribute("DashRegenFury", 0.01)
        character:SetAttribute("UtilityBoost", 1.5)
    end
end

local toolsToModify = {
    ["Sword"] = {
        LungeRate = 0,
        Swingrate = 0,
        OffhandSwingRate = 0
    },
    ["Firebrand"] = {
        LungeRate = 0,
        Swingrate = 0,
        OffhandSwingRate = 0,
        Windup = 0
    },
    ["Katana"] = {
        LungeRate = 0,
        Swingrate = 0,
        OffhandSwingRate = 0
    },
    ["Slingshot"] = {
        Capacity = 10000,
        ChargeRate = 0,
        Firerate = 0,
        Spread = 0,
        ProjectileSpeed = 6767
    },
    ["Freeze Ray"] = {
        Firerate = 0,
        ProjectileSpeed = 2250,
        ChargeTime = 0
    },
    ["Paintbull Gun"] = {
        Firerate = 0,
        ProjectileSpeed = 2250
    },
    ["BB Gun"] = {
        Firerate = 0,
        MinShots = 2,
        MaxShots = math.huge
    },
    ["Bazooka"] = {
        Firerate = 0,
        ReloadTick = 0,
        Capacity = 100,
        PassiveReloadTick = 0
    }
}

task.spawn(function()
    while task.wait(5) do
        modifyAllTools(toolsToModify)
    end
end)

if LocalPlayer.Character then
    utilityRespawn(LocalPlayer.Character)
end

LocalPlayer.CharacterAdded:Connect(utilityRespawn)
